<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CatchAlong :: Share Seats On The Same Route</title>
  <base href="/" />
  <meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon" href="/img/ketch-logo.png" />
  <link rel="stylesheet" type="text/css" href="/app.css" />
</head>

<body>

  <!-- defaults to assuming OFFLINE, and showing waiting for network -->
  <div id="offliner">
    <div id="offliner-message">
      <img src="/img/ketch-logo.svg" />
      <p>Checking the "work" in network...</p>
      <img src="/img/loading-ring.svg" />
    </div>
  </div>

  <nav app-mount :class="{'nav-open':$store.getters.navStatus}">
    <navigation inline-template>
      <div class="sidebar">
        <ul>
          <li v-for="(item, index) in navItems" ref="listItems">
            <router-link :to="item.path">{{ item.name }}</router-link>
          </li>
        </ul>
      </div>
    </navigation>
  </nav>

  <!-- organizationally, we should put this *after* the <main> tag below,
  but there's a VERY strange bug w/ vue-router where the ordering matters of
  things that are mounted by the bootstrapper (eg. navigation will fail to
  work). So the [app-mount] node with <router-view /> in it always needs to be
  last. -->
  <modal-window app-mount :class="{'open':$store.getters.modalStatus}"></modal-window>

  <!-- ensure this is always the last [app-mount]'ed node -->
  <main app-mount :class="{'nav-open':$store.getters.navStatus}">
    <a id="nav-trigger" class="icon-navicon" v-on:click="$__toggleNavHelper"></a>
    <div id="container-1">
      <keep-alive include="doKeepAlive">
        <router-view />
      </keep-alive>
    </div>
  </main>

<!-- BEGIN: TEMPLATE PARTIALS -->
<!-- PARTIALS -->
<!-- END: TEMPLATE PARTIALS -->

<% _.forEach(scripts, function (scriptPath) { %>
<script type="text/javascript" src="<%= scriptPath %>"></script>
<% }) %>

<% if (envIs('development')) { %>
<script type="text/javascript">
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src = 'https://' + location.hostname + ':35729/livereload.js?snipver=1';
  document.querySelector('head').appendChild(script);
</script>
<% } %>
</body>
</html>
